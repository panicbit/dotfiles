#!/bin/bash

volume=$(amixer get Master | grep -oEm 1 '[0-9]{1,3}%')
volume=${volume%?}
mutestate=$(amixer get Master | grep -oEm 1 "\[on\]|\[off\]" | sed -E 's/\[(.*)\]/\1/g')
echo $volume
echo $mutestate

volume=$[$volume-10]
if [ $volume -lt 0 ]; then volume=0; fi
echo New Volume: $volume
amixer set Master $volume%

msg="Volume: $volume%"
if [ "$mutestate" == "off" ]; then
    msg="$msg | ^fg(red)Muted"
fi
dzen-msg $msg
